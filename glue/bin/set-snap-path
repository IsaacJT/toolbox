#!/bin/bash
if [ -z "${1}" ]; then
    echo "Pass snap name!!!"
    exit
fi

[ -z "${ARCH_TRIPLET}" ] && ARCH_TRIPLET="$(basename $(ls -d /usr/lib/*-linux-*))"

echo -e "\n# Update ~/.bashrc with follwing lines" >&2
echo -e "\n# ${1} PATH, LD_LIBRARY_PATH paths updates"
echo "SNAP_NAME=${1}"
echo "SNAP_PATH=\"/snap/\${SNAP_NAME}/current\""
echo "ARCH_TRIPLET=${ARCH_TRIPLET}"
echo "export PATH=\${SNAP_PATH}/bin:\${SNAP_PATH}/sbin:\${SNAP_PATH}/usr/bin:\${SNAP_PATH}/usr/sbin:\$PATH"
echo "export LD_LIBRARY_PATH=\$LD_LIBRARY_PATH:\${SNAP_PATH}/lib:\${SNAP_PATH}/usr/lib:\${SNAP_PATH}/lib/\${ARCH_TRIPLET}:\${SNAP_PATH}/usr/lib/\${ARCH_TRIPLET}"
echo "alias sudo='sudo env "PATH=\$PATH" LD_LIBRARY_PATH=\$LD_LIBRARY_PATH'"
echo "XDG_DATA_DIRS=/usr/local/share:/usr/share:/snap/snapd/current/usr/share:\${SNAP_PATH}/usr/share"
echo "SNAP_TOOLBOX=\${SNAP_PATH}"
echo "source \${SNAP_PATH}/etc/profile.d/bash_completion.sh"
